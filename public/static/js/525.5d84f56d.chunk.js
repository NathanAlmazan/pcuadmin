"use strict";(self.webpackChunktracetemp=self.webpackChunktracetemp||[]).push([[525],{53525:function(e,n,t){t.r(n),t.d(n,{default:function(){return X}});var r=t(74165),a=t(15861),i=t(70885),s=t(72791),l=t(66934),o=t(34663),c=t(28029),u=t(63466),d=t(5403),h=t(80184),p=(0,l.ZP)(o.Z)((function(e){return{height:96,display:"flex",justifyContent:"space-between",padding:e.theme.spacing(0,1,0,0)}})),m=(0,l.ZP)(c.Z)((function(e){var n=e.theme;return{width:300,transition:n.transitions.create(["box-shadow","width"],{easing:n.transitions.easing.easeInOut,duration:n.transitions.duration.shorter}),"&.Mui-focused":{width:400,boxShadow:200},"& fieldset":{borderWidth:"1px !important",borderColor:"0px 5px 6px -3px alpha(color, 0.2),0px 9px 12px 1px alpha(color, 0.14),0px 3px 16px 2px alpha(color, 0.12) !important"}}}));function x(e){var n=e.filterName,t=e.onFilterName;return(0,h.jsx)(p,{children:(0,h.jsx)(m,{value:n,onChange:t,type:"number",placeholder:"Search serial...",startAdornment:(0,h.jsx)(u.Z,{position:"start",children:(0,h.jsx)(d.Z,{})})})})}var f=t(28342),Z=t(4942),g=t(1413),v=t(61889),j=t(36151),b=t(40254),_=t(5289),C=t(97123),w=t(39157),y=t(65661),P=t(53767),S=t(93044),k=t(74569),N=t.n(k),R=t(74453),I=t(6278);var W=function(e){var n=e.open,t=e.account,l=e.handleClose,o=(0,s.useState)({stud_number:t.stud_number,first_name:t.first_name,last_name:t.last_name,middle_name:t.middle_name,section:t.section,parent_email:t.parent_email}),c=(0,i.Z)(o,2),u=c[0],d=c[1],p=(0,s.useState)(),m=(0,i.Z)(p,2),x=m[0],f=m[1],k=(0,s.useState)(null),W=(0,i.Z)(k,2),M=W[0],L=W[1],q=(0,s.useState)(),F=(0,i.Z)(q,2),D=F[0],A=F[1],E=u.stud_number,T=u.first_name,V=u.last_name,z=u.middle_name,O=u.section,U=u.parent_email;s.useEffect((function(){d((function(e){return{stud_number:t.stud_number,first_name:t.first_name,last_name:t.last_name,middle_name:t.middle_name,section:t.section,parent_email:t.parent_email}}))}),[t]),s.useEffect((function(){if(null!==M){var e=new FileReader;e.readAsDataURL(M),e.onloadend=function(n){A([e.result])}}}),[M]);var H=function(e){var n;n=e.target.value,/\d/.test(n)||d((0,g.Z)((0,g.Z)({},u),{},(0,Z.Z)({},e.target.name,e.target.value)))},J=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M){e.next=7;break}return n=(0,R.iH)(I.IG,"profiles/"+M.name),e.next=4,(0,R.KV)(n,M);case 4:return e.next=6,(0,R.Jt)(n);case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,J();case 3:((a=e.sent)||t.photo_url)&&N().post("".concat("https://qrattendace.herokuapp.com","/students/update"),JSON.stringify({first_name:T,last_name:V,middle_name:z,section:O,serial:t.serial,photo_url:a,parent_email:U}),{headers:{"Content-Type":"application/json"}}).then((function(e){d({stud_number:"",first_name:"",last_name:"",middle_name:"",section:"",parent_email:""}),f(void 0),l()})).catch((function(e){console.log(e),f("Please check your Internet connection and try again.")}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,h.jsx)(_.Z,{open:n,onClose:l,children:(0,h.jsxs)("form",{onSubmit:Y,children:[(0,h.jsx)(y.Z,{children:"Update Account"}),(0,h.jsx)(w.Z,{children:(0,h.jsxs)(v.ZP,{container:!0,spacing:2,mt:3,children:[(0,h.jsx)(v.ZP,{item:!0,xs:12,sm:6,children:(0,h.jsxs)(P.Z,{direction:"column",justifyContent:"center",alignItems:"center",spacing:2,children:[(0,h.jsx)(b.Z,{name:"serial",label:"Serial Number",value:t.serial,fullWidth:!0,variant:"outlined"}),(0,h.jsx)(b.Z,{autoFocus:!0,name:"first_name",label:"First Name",value:T,onChange:H,inputProps:{maxLength:20},fullWidth:!0,variant:"outlined",required:!0})]})}),(0,h.jsx)(v.ZP,{item:!0,xs:12,sm:6,children:(0,h.jsxs)(P.Z,{justifyContent:"center",alignItems:"center",spacing:2,children:[(0,h.jsx)(S.Z,{src:D||t.photo_url,sx:{height:90,width:90,cursor:"pointer"},children:"NA"}),(0,h.jsxs)(j.Z,{variant:"outlined",size:"small",component:"label",children:["Change Image",(0,h.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:function(e){e.target.files&&L(e.target.files[0])},hidden:!0})]})]})}),(0,h.jsx)(v.ZP,{item:!0,xs:12,sm:6,children:(0,h.jsx)(b.Z,{name:"middle_name",label:"Middle Name",value:z,inputProps:{maxLength:20},onChange:H,fullWidth:!0,variant:"outlined",required:!0})}),(0,h.jsx)(v.ZP,{item:!0,xs:12,sm:6,children:(0,h.jsx)(b.Z,{name:"stud_number",label:"Student Number",type:"number",value:E,inputProps:{min:1111111111,max:99999999999},onChange:function(e){return d((0,g.Z)((0,g.Z)({},u),{},(0,Z.Z)({},e.target.name,e.target.value)))},fullWidth:!0,variant:"outlined",required:!0})}),(0,h.jsx)(v.ZP,{item:!0,xs:12,sm:6,children:(0,h.jsx)(b.Z,{name:"last_name",label:"Last Name",value:V,inputProps:{maxLength:20},onChange:H,fullWidth:!0,variant:"outlined",required:!0})}),(0,h.jsx)(v.ZP,{item:!0,xs:12,sm:6,children:(0,h.jsx)(b.Z,{name:"section",label:"Course & Section",value:O,onChange:function(e){d((0,g.Z)((0,g.Z)({},u),{},(0,Z.Z)({},e.target.name,e.target.value.toUpperCase())))},inputProps:{maxLength:6},fullWidth:!0,variant:"outlined",required:!0})}),(0,h.jsx)(v.ZP,{item:!0,xs:12,children:(0,h.jsx)(b.Z,{name:"parent_email",label:"Parent Email",value:U,type:"email",onChange:H,fullWidth:!0,variant:"outlined",required:!0,error:void 0!==x,helperText:x})})]})}),(0,h.jsxs)(C.Z,{children:[(0,h.jsx)(j.Z,{color:"error",onClick:l,children:"Cancel"}),(0,h.jsx)(j.Z,{type:"submit",children:"Save Changes"})]})]})})},M=t(51691),L=t(1656);function q(e){var n=e.open,t=e.name,r=e.serial,a=e.handleClose;return(0,h.jsxs)(_.Z,{open:n,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,h.jsx)(y.Z,{id:"alert-dialog-title",children:"Are you sure you want to delete "+(0,L.I)(t)}),(0,h.jsx)(w.Z,{children:(0,h.jsx)(M.Z,{id:"alert-dialog-description",children:"Please keep in mind that by clicking 'Yes', all ".concat((0,L.I)(t),"'s logs will also be deleted and cannot be retrieved again.")})}),(0,h.jsxs)(C.Z,{children:[(0,h.jsx)(j.Z,{onClick:a,children:"Cancel"}),(0,h.jsx)(j.Z,{onClick:function(){N().post("".concat("https://qrattendace.herokuapp.com","/students/delete"),JSON.stringify({serial:r}),{headers:{"Content-Type":"application/json"}}).then((function(e){a()})).catch((function(e){return console.log(e)}))},autoFocus:!0,children:"Yes"})]})]})}var F=t(64554),D=t(20890),A=t(57621),E=t(39281),T=t(79836),V=t(35855),z=t(53382),O=t(53994),U=t(63033),H=t(13400),J=t(82477),Y=t(29686),B=t(41286),G=t(27247),K=[{id:"avatar",label:"",alignRight:!1},{id:"first_name",label:"First Name",alignRight:!1},{id:"middle_name",label:"Middle Name.",alignRight:!1},{id:"last_name",label:"Last Name",alignRight:!1},{id:"student_id",label:"Serial No.",alignRight:!1},{id:"course",label:"Course",alignRight:!1},{id:"options",label:"",alignRight:!0}];function X(){var e=(0,s.useState)([]),n=(0,i.Z)(e,2),t=n[0],l=n[1],o=(0,s.useState)([]),c=(0,i.Z)(o,2),u=c[0],d=c[1],p=(0,s.useState)(5),m=(0,i.Z)(p,2),Z=m[0],g=m[1],v=(0,s.useState)(0),j=(0,i.Z)(v,2),b=j[0],_=j[1],C=(0,s.useState)(!1),w=(0,i.Z)(C,2),y=w[0],k=w[1],N=(0,s.useState)(),R=(0,i.Z)(N,2),I=R[0],M=R[1],X=(0,s.useState)(""),Q=(0,i.Z)(X,2),$=Q[0],ee=Q[1],ne=(0,s.useState)(!1),te=(0,i.Z)(ne,2),re=te[0],ae=te[1];(0,s.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Y.lV)();case 3:n=e.sent,l((function(e){return n})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,s.useEffect)((function(){d((function(e){return t.filter((function(e){return e.stud_number.includes($)})).slice(b*Z,b*Z+Z)}))}),[Z,b,t,$]);var ie=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!1),ae(!1),e.prev=2,e.next=5,(0,Y.lV)();case 5:n=e.sent,l(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return(0,h.jsxs)(A.Z,{sx:{p:2},children:[(0,h.jsx)(x,{filterName:$,onFilterName:function(e){return ee(e.target.value)}}),(0,h.jsx)(F.Z,{sx:{overflowX:"auto"},children:(0,h.jsx)(E.Z,{sx:{minWidth:1e3},children:(0,h.jsxs)(T.Z,{children:[(0,h.jsx)(f.Z,{orderBy:"name",order:"asc",headLabel:K,onRequestSort:function(e){}}),(0,h.jsx)(z.Z,{children:u.map((function(e){return(0,h.jsxs)(V.Z,{hover:!0,tabIndex:-1,role:"checkbox",children:[(0,h.jsx)(O.Z,{padding:"checkbox",children:(0,h.jsx)(S.Z,{children:e.first_name.charAt(0).toUpperCase()+e.last_name.charAt(0).toUpperCase()})}),(0,h.jsx)(O.Z,{component:"th",scope:"row",children:(0,h.jsx)(D.Z,{variant:"subtitle2",noWrap:!0,children:(0,L.I)(e.first_name)})}),(0,h.jsx)(O.Z,{component:"th",scope:"row",children:(0,h.jsx)(D.Z,{variant:"subtitle2",noWrap:!0,children:(0,L.I)(e.middle_name)})}),(0,h.jsx)(O.Z,{component:"th",scope:"row",children:(0,h.jsx)(D.Z,{variant:"subtitle2",noWrap:!0,children:(0,L.I)(e.last_name)})}),(0,h.jsx)(O.Z,{align:"left",children:e.stud_number}),(0,h.jsx)(O.Z,{align:"left",children:e.section}),(0,h.jsx)(O.Z,{align:"right",children:(0,h.jsxs)(P.Z,{direction:"row",justifyContent:"flex-end",children:[(0,h.jsx)(H.Z,{color:"info",onClick:function(){return M(e),void k(!0)},children:(0,h.jsx)(J.Z,{title:"Edit",children:(0,h.jsx)(B.Z,{})})}),(0,h.jsx)(H.Z,{color:"error",onClick:function(){return M(e),void ae(!0)},children:(0,h.jsx)(J.Z,{title:"Delete",children:(0,h.jsx)(G.Z,{})})})]})})]},e.stud_number)}))})]})})}),(0,h.jsx)(U.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:t.length,rowsPerPage:Z,page:b,onPageChange:function(e,n){return _(n)},onRowsPerPageChange:function(e){g(parseInt(e.target.value,10)),_(0)}}),I&&(0,h.jsx)(W,{account:I,open:y,handleClose:ie}),I&&(0,h.jsx)(q,{name:I.first_name+" "+I.last_name,serial:I.serial,open:re,handleClose:ie})]})}},27247:function(e,n,t){var r=t(95318);n.Z=void 0;var a=r(t(45649)),i=t(80184),s=(0,a.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=s},41286:function(e,n,t){var r=t(95318);n.Z=void 0;var a=r(t(45649)),i=t(80184),s=(0,a.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");n.Z=s},51691:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(63366),a=t(87462),i=t(72791),s=t(94419),l=t(66934),o=t(31402),c=t(20890),u=t(21217);function d(e){return(0,u.Z)("MuiDialogContentText",e)}(0,t(75878).Z)("MuiDialogContentText",["root"]);var h=t(80184),p=["children"],m=(0,l.ZP)(c.Z,{shouldForwardProp:function(e){return(0,l.FO)(e)||"classes"===e},name:"MuiDialogContentText",slot:"Root",overridesResolver:function(e,n){return n.root}})({}),x=i.forwardRef((function(e,n){var t=(0,o.Z)({props:e,name:"MuiDialogContentText"}),i=(0,r.Z)(t,p),l=function(e){var n=e.classes,t=(0,s.Z)({root:["root"]},d,n);return(0,a.Z)({},n,t)}(i);return(0,h.jsx)(m,(0,a.Z)({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:i},t,{classes:l}))}))}}]);
//# sourceMappingURL=525.5d84f56d.chunk.js.map